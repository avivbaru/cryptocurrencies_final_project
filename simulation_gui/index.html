<!DOCTYPE html>
<html>
<style>
    body {font-family: Arial, Helvetica, sans-serif;}
    * {box-sizing: border-box;}

    input[type=text], select, textarea {
        width: 100%;
        padding: 12px;
        border: 1px solid #ccc;
        border-radius: 4px;
        box-sizing: border-box;
        margin-top: 6px;
        margin-bottom: 16px;
        resize: vertical;
    }

    p[itemtype=text] {
        margin-bottom: 1%;
        margin-top: 3%;
        /*padding-bottom: 12px;*/
        /*box-sizing: border-box;*/
        /*margin-top: 6px;*/
        /*border-radius: 4px;*/
    }

    input[type=submit] {
        background-color: #4CAF50;
        color: white;
        padding: 12px 20px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
    }

    div[itemtype=slider] {
        /*border: 4px;*/
        /*border-radius: 4px;*/
        /*margin-top: 7px;*/
        /*cursor: pointer;*/
        max-width: 80%;
    }

    div[itemtype=value] {
        margin-bottom: 8%;
        margin-top: 1%;
        cursor: pointer;
    }

    /*div[itemtype=box] {*/
    /*    border: 60px;*/
    /*    border-radius: 4px;*/
    /*}*/

    input[type=submit]:hover {
        background-color: #45a049;
    }
    a.button4{
        display:inline-block;
        padding:0.3em 1.2em;
        margin:0 0.1em 0.1em 0;
        border:0.16em solid rgba(255,255,255,0);
        border-radius:2em;
        box-sizing: border-box;
        text-decoration:none;
        font-family:'Roboto',sans-serif;
        font-weight:300;
        color:#FFFFFF;
        text-shadow: 0 0.04em 0.04em rgba(0,0,0,0.35);
        text-align:center;
        transition: all 0.2s;
    }
    a.button4:hover{
        border-color: rgba(255,255,255,1);
    }
    @media all and (max-width:30em){
        â€ƒa.button4{
            display:block;
            margin:0.2em auto;
            }
    }

    .container {
        border-radius: 5px;
        background-color: #f2f2f2;
        padding: 20px;
    }


    body {
        font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
        width: 960px;
        height: 500px;
        position: relative;
    }

    svg {
        width: 100%;
        height: 100%;
    }

    path.slice{
        stroke-width:2px;
    }

    polyline{
        opacity: .3;
        stroke: black;
        stroke-width: 2px;
        fill: none;
    }
    div[itemtype=container] {
        width: 100%;
    }
    div[itemtype=inner] {
        width: 40%;
        /*display: inline-block;*/
        display: inline-block;
    }

</style>
<head>
    <link href="nouislider.css" rel="stylesheet">
    <script src="nouislider.js"></script>
</head>
<body>
<div class="container">
    <form>
        <div itemtype="container" class="container">
            <div itemtype="inner" class="container">
                <p itemtype="text">text</p>
                <div id="slider1" itemtype="slider"></div>
                <div id="slider1-span" itemtype="value"></div>
            </div>
            <div itemtype="inner" class="container">
                <p itemtype="text">text</p>
                <div itemtype="slider" id="slider2"></div>
                <div itemtype="value" id="slider2-span"></div>
            </div>
        </div>
        <div itemtype="container" class="container">
            <div itemtype="inner" class="container">
                <p itemtype="text">text</p>
                <div id="slider3" itemtype="slider"></div>
                <div id="slider3-span" itemtype="value"></div>
            </div>
            <div itemtype="inner" class="container">
                <p itemtype="text">text</p>
                <div itemtype="slider" id="slider4"></div>
                <div itemtype="value" id="slider4-span"></div>
            </div>
        </div>
<!--        <p itemtype="text">text</p>-->
<!--        <div itemtype="slider" id="slider3"></div>-->
<!--        <div itemtype="value" id="slider3-span"></div>-->
<!--        <p itemtype="text">text</p>-->
<!--        <div itemtype="slider" id="slider4"></div>-->
<!--        <div itemtype="value" id="slider4-span"></div>-->

        <a class="button4" style="background-color:#f14e4e" onclick="changeGraph()">Get data</a>

        <p itemtype="text" id="value1"></p>
        <p itemtype="text" id="value2"></p>
        <p itemtype="text" id="value3"></p>
        <p itemtype="text" id="value4"></p>
<!--        <input type="file" id="jsonFile" name="jsonFile" />-->

    </form>
</div>
</body>
<!--<script src="https://d3js.org/d3.v4.js"></script>-->
<script src="https://d3js.org/d3.v3.min.js"></script>
<script>

var slider1 = document.getElementById('slider1');
var slider2 = document.getElementById('slider2');
var slider3 = document.getElementById('slider3');
var slider4 = document.getElementById('slider4');

var slider1Value = document.getElementById('slider1-span');
var slider2Value = document.getElementById('slider2-span');
var slider3Value = document.getElementById('slider3-span');
var slider4Value = document.getElementById('slider4-span');

var submit = document.getElementById('submit');
function readJsonFile(jsonFile) {
    var request = new XMLHttpRequest();
    request.open("GET", jsonFile, false);
    request.send(null)
    return JSON.parse(request.responseText);
}

var all_data = readJsonFile("fake_data.json")
function changeGraph() {
    const key = Math.ceil(slider1Value.innerText) + "_" + Math.ceil(slider2Value.innerText) + "_" +
        Math.ceil(slider3Value.innerText) + "_" + Math.ceil(slider4Value.innerText);
    const run_result = all_data[key];
    console.log(run_result);
    console.log(key);
    console.log(all_data);
    document.getElementById("value1").innerText = "honest money avg: " + run_result["honest money avg"];
    document.getElementById("value2").innerHTML = "soft griefing avg: " + run_result["soft griefing avg"];
    document.getElementById("value3").innerHTML = "money_locked: " + run_result["money_locked"];
}


noUiSlider.create(slider1, {
    start: 0,

    // Disable animation on value-setting,
    // so the sliders respond immediately.
    animate: true,
    range: {
    'min': [ 0 ],
    '0%': [ 0, 500 ],
    '10%': [ 500, 500 ],
    '50%': [ 4000, 1000 ],
    'max': [ 10000, 1000 ]
},
});

noUiSlider.create(slider2, {
    start: 80,
    animate: false,
    range: {
        min: 50,
        max: 100
    }
});

noUiSlider.create(slider3, {
    start: 80,
    animate: false,
    range: {
        min: 50,
        max: 100
    }
});

noUiSlider.create(slider4, {
    start: 80,
    animate: false,
    range: {
        min: 50,
        max: 100
    }
});

slider1.noUiSlider.on('update', function (values, handle) {
    slider1Value.innerHTML = values[handle];
});

slider2.noUiSlider.on('update', function (values, handle) {
    slider2Value.innerHTML = values[handle];
    slider2.noUiSlider.value = values[handle] - 2;
});

slider3.noUiSlider.on('update', function (values, handle) {
    slider3Value.innerHTML = values[handle];
    slider3.noUiSlider.value = values[handle] - 2;
});

slider4.noUiSlider.on('update', function (values, handle) {
    slider4Value.innerHTML = values[handle];
    slider4.noUiSlider.value = values[handle] - 2;
});
</script>
<!--<script>-->
<!--    var svg = d3.select("body")-->
<!--        .append("svg")-->
<!--        .append("g")-->

<!--    svg.append("g")-->
<!--        .attr("class", "slices");-->
<!--    svg.append("g")-->
<!--        .attr("class", "labels");-->
<!--    svg.append("g")-->
<!--        .attr("class", "lines");-->

<!--    var width = 960,-->
<!--        height = 450,-->
<!--        radius = Math.min(width, height) / 2;-->

<!--    var pie = d3.layout.pie()-->
<!--        .sort(null)-->
<!--        .value(function(d) {-->
<!--            return d.value;-->
<!--        });-->

<!--    var arc = d3.svg.arc()-->
<!--        .outerRadius(radius * 0.8)-->
<!--        .innerRadius(radius * 0.4);-->

<!--    var outerArc = d3.svg.arc()-->
<!--        .innerRadius(radius * 0.9)-->
<!--        .outerRadius(radius * 0.9);-->

<!--    svg.attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");-->

<!--    var key = function(d){ return d.data.label; };-->

<!--    var color = d3.scale.ordinal()-->
<!--        .domain(["Lorem ipsum", "dolor sit", "amet", "consectetur", "adipisicing", "elit", "sed", "do", "eiusmod", "tempor", "incididunt"])-->
<!--        .range(["#98abc5", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00"]);-->

<!--    function randomData (){-->
<!--        var labels = color.domain();-->
<!--        return labels.map(function(label){-->
<!--            return { label: label, value: Math.random() }-->
<!--        });-->
<!--    }-->

<!--    change(randomData());-->

<!--    d3.select(".randomize")-->
<!--        .on("click", function(){-->
<!--            change(randomData());-->
<!--        });-->


<!--    function change(data) {-->

<!--        /* -&#45;&#45;&#45;&#45;&#45;&#45; PIE SLICES -&#45;&#45;&#45;&#45;&#45;&#45;*/-->
<!--        var slice = svg.select(".slices").selectAll("path.slice")-->
<!--            .data(pie(data), key);-->

<!--        slice.enter()-->
<!--            .insert("path")-->
<!--            .style("fill", function(d) { return color(d.data.label); })-->
<!--            .attr("class", "slice");-->

<!--        slice-->
<!--            .transition().duration(1000)-->
<!--            .attrTween("d", function(d) {-->
<!--                this._current = this._current || d;-->
<!--                var interpolate = d3.interpolate(this._current, d);-->
<!--                this._current = interpolate(0);-->
<!--                return function(t) {-->
<!--                    return arc(interpolate(t));-->
<!--                };-->
<!--            })-->

<!--        slice.exit()-->
<!--            .remove();-->

<!--        /* -&#45;&#45;&#45;&#45;&#45;&#45; TEXT LABELS -&#45;&#45;&#45;&#45;&#45;&#45;*/-->

<!--        var text = svg.select(".labels").selectAll("text")-->
<!--            .data(pie(data), key);-->

<!--        text.enter()-->
<!--            .append("text")-->
<!--            .attr("dy", ".35em")-->
<!--            .text(function(d) {-->
<!--                return d.data.label;-->
<!--            });-->

<!--        function midAngle(d){-->
<!--            return d.startAngle + (d.endAngle - d.startAngle)/2;-->
<!--        }-->

<!--        text.transition().duration(1000)-->
<!--            .attrTween("transform", function(d) {-->
<!--                this._current = this._current || d;-->
<!--                var interpolate = d3.interpolate(this._current, d);-->
<!--                this._current = interpolate(0);-->
<!--                return function(t) {-->
<!--                    var d2 = interpolate(t);-->
<!--                    var pos = outerArc.centroid(d2);-->
<!--                    pos[0] = radius * (midAngle(d2) < Math.PI ? 1 : -1);-->
<!--                    return "translate("+ pos +")";-->
<!--                };-->
<!--            })-->
<!--            .styleTween("text-anchor", function(d){-->
<!--                this._current = this._current || d;-->
<!--                var interpolate = d3.interpolate(this._current, d);-->
<!--                this._current = interpolate(0);-->
<!--                return function(t) {-->
<!--                    var d2 = interpolate(t);-->
<!--                    return midAngle(d2) < Math.PI ? "start":"end";-->
<!--                };-->
<!--            });-->

<!--        text.exit()-->
<!--            .remove();-->

<!--        /* -&#45;&#45;&#45;&#45;&#45;&#45; SLICE TO TEXT POLYLINES -&#45;&#45;&#45;&#45;&#45;&#45;*/-->

<!--        var polyline = svg.select(".lines").selectAll("polyline")-->
<!--            .data(pie(data), key);-->

<!--        polyline.enter()-->
<!--            .append("polyline");-->

<!--        polyline.transition().duration(1000)-->
<!--            .attrTween("points", function(d){-->
<!--                this._current = this._current || d;-->
<!--                var interpolate = d3.interpolate(this._current, d);-->
<!--                this._current = interpolate(0);-->
<!--                return function(t) {-->
<!--                    var d2 = interpolate(t);-->
<!--                    var pos = outerArc.centroid(d2);-->
<!--                    pos[0] = radius * 0.95 * (midAngle(d2) < Math.PI ? 1 : -1);-->
<!--                    return [arc.centroid(d2), outerArc.centroid(d2), pos];-->
<!--                };-->
<!--            });-->

<!--        polyline.exit()-->
<!--            .remove();-->
<!--    }-->
<!--</script>-->
</html>